<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeSrcipt | 慢八拍の博客</title>
    <meta name="description" content="慢八拍的私人博客，仅作为学习成果的记录与总结">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.b43ad9b6.css" as="style"><link rel="preload" href="/blog/assets/js/app.b560a9ee.js" as="script"><link rel="preload" href="/blog/assets/js/2.465c49ea.js" as="script"><link rel="preload" href="/blog/assets/js/77.794b3963.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b92c5624.js"><link rel="prefetch" href="/blog/assets/js/11.9fdd4fa0.js"><link rel="prefetch" href="/blog/assets/js/12.cd94c2e9.js"><link rel="prefetch" href="/blog/assets/js/13.5b41bce2.js"><link rel="prefetch" href="/blog/assets/js/14.fa342c23.js"><link rel="prefetch" href="/blog/assets/js/15.314e9b9c.js"><link rel="prefetch" href="/blog/assets/js/16.bfb01263.js"><link rel="prefetch" href="/blog/assets/js/17.b4e3fb56.js"><link rel="prefetch" href="/blog/assets/js/18.261c3d38.js"><link rel="prefetch" href="/blog/assets/js/19.117defc3.js"><link rel="prefetch" href="/blog/assets/js/20.f52ff07d.js"><link rel="prefetch" href="/blog/assets/js/21.a2b10669.js"><link rel="prefetch" href="/blog/assets/js/22.479e926d.js"><link rel="prefetch" href="/blog/assets/js/23.dba2b62e.js"><link rel="prefetch" href="/blog/assets/js/24.d6a3bd26.js"><link rel="prefetch" href="/blog/assets/js/25.d758452b.js"><link rel="prefetch" href="/blog/assets/js/26.2252f2b9.js"><link rel="prefetch" href="/blog/assets/js/27.0a3af6d9.js"><link rel="prefetch" href="/blog/assets/js/28.10880793.js"><link rel="prefetch" href="/blog/assets/js/29.93c15754.js"><link rel="prefetch" href="/blog/assets/js/3.44856348.js"><link rel="prefetch" href="/blog/assets/js/30.2976867e.js"><link rel="prefetch" href="/blog/assets/js/31.90077d17.js"><link rel="prefetch" href="/blog/assets/js/32.5040470b.js"><link rel="prefetch" href="/blog/assets/js/33.e72166c5.js"><link rel="prefetch" href="/blog/assets/js/34.c50a7662.js"><link rel="prefetch" href="/blog/assets/js/35.b3965b29.js"><link rel="prefetch" href="/blog/assets/js/36.d98cbffe.js"><link rel="prefetch" href="/blog/assets/js/37.a1a177c3.js"><link rel="prefetch" href="/blog/assets/js/38.6d546a3a.js"><link rel="prefetch" href="/blog/assets/js/39.a6f90fe6.js"><link rel="prefetch" href="/blog/assets/js/4.903d47a9.js"><link rel="prefetch" href="/blog/assets/js/40.27446a44.js"><link rel="prefetch" href="/blog/assets/js/41.34baa793.js"><link rel="prefetch" href="/blog/assets/js/42.84ae0f85.js"><link rel="prefetch" href="/blog/assets/js/43.ae479153.js"><link rel="prefetch" href="/blog/assets/js/44.2153b298.js"><link rel="prefetch" href="/blog/assets/js/45.43705845.js"><link rel="prefetch" href="/blog/assets/js/46.516d39b1.js"><link rel="prefetch" href="/blog/assets/js/47.ebc5464a.js"><link rel="prefetch" href="/blog/assets/js/48.32c83e07.js"><link rel="prefetch" href="/blog/assets/js/49.0971dc11.js"><link rel="prefetch" href="/blog/assets/js/5.4e775f96.js"><link rel="prefetch" href="/blog/assets/js/50.32552bd3.js"><link rel="prefetch" href="/blog/assets/js/51.b01dd074.js"><link rel="prefetch" href="/blog/assets/js/52.9fda750f.js"><link rel="prefetch" href="/blog/assets/js/53.f394e7e7.js"><link rel="prefetch" href="/blog/assets/js/54.dd407329.js"><link rel="prefetch" href="/blog/assets/js/55.c153e374.js"><link rel="prefetch" href="/blog/assets/js/56.7a7d3e13.js"><link rel="prefetch" href="/blog/assets/js/57.5fd18b65.js"><link rel="prefetch" href="/blog/assets/js/58.0b98c064.js"><link rel="prefetch" href="/blog/assets/js/59.8670e5ba.js"><link rel="prefetch" href="/blog/assets/js/6.d5b6aa0e.js"><link rel="prefetch" href="/blog/assets/js/60.074ab1e7.js"><link rel="prefetch" href="/blog/assets/js/61.17f1b1f5.js"><link rel="prefetch" href="/blog/assets/js/62.320ea960.js"><link rel="prefetch" href="/blog/assets/js/63.e1d292be.js"><link rel="prefetch" href="/blog/assets/js/64.c47f0ec2.js"><link rel="prefetch" href="/blog/assets/js/65.7fc66f8b.js"><link rel="prefetch" href="/blog/assets/js/66.69883841.js"><link rel="prefetch" href="/blog/assets/js/67.a372f1fb.js"><link rel="prefetch" href="/blog/assets/js/68.34f15fc2.js"><link rel="prefetch" href="/blog/assets/js/69.79092013.js"><link rel="prefetch" href="/blog/assets/js/7.2e2c7a99.js"><link rel="prefetch" href="/blog/assets/js/70.04839a8e.js"><link rel="prefetch" href="/blog/assets/js/71.3d54ab62.js"><link rel="prefetch" href="/blog/assets/js/72.d175e94b.js"><link rel="prefetch" href="/blog/assets/js/73.d9eb411b.js"><link rel="prefetch" href="/blog/assets/js/74.2967098f.js"><link rel="prefetch" href="/blog/assets/js/75.be31a493.js"><link rel="prefetch" href="/blog/assets/js/76.3db8d08b.js"><link rel="prefetch" href="/blog/assets/js/78.de200e53.js"><link rel="prefetch" href="/blog/assets/js/79.6b401ba5.js"><link rel="prefetch" href="/blog/assets/js/8.925ce3f7.js"><link rel="prefetch" href="/blog/assets/js/80.afac74c2.js"><link rel="prefetch" href="/blog/assets/js/81.a949f8bc.js"><link rel="prefetch" href="/blog/assets/js/82.ffb183ad.js"><link rel="prefetch" href="/blog/assets/js/83.74c9d49b.js"><link rel="prefetch" href="/blog/assets/js/84.299ddf66.js"><link rel="prefetch" href="/blog/assets/js/85.c2d2381f.js"><link rel="prefetch" href="/blog/assets/js/9.c9fbc570.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b43ad9b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">慢八拍の博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/js/" class="nav-link">JavaScript 笔记</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">CSS 笔记</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">Vue 笔记</a></div><div class="nav-item"><a href="/blog/imooc/" class="nav-link">慕课网笔记</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link router-link-active">杂记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/js/" class="nav-link">JavaScript 笔记</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">CSS 笔记</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">Vue 笔记</a></div><div class="nav-item"><a href="/blog/imooc/" class="nav-link">慕课网笔记</a></div><div class="nav-item"><a href="/blog/others/" class="nav-link router-link-active">杂记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>杂记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/others/" class="sidebar-link">介绍</a></li><li><a href="/blog/others/cross.html" class="sidebar-link">跨域</a></li><li><a href="/blog/others/axios.html" class="sidebar-link">axios 常用方式总结</a></li><li><a href="/blog/others/typescript.html" class="active sidebar-link">TypeSrcipt</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_1-interface" class="sidebar-link">1.interface</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_2-类" class="sidebar-link">2.类</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_3-函数" class="sidebar-link">3.函数</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_4-泛型" class="sidebar-link">4.泛型</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_5-枚举" class="sidebar-link">5.枚举</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_6-类型兼容性" class="sidebar-link">6.类型兼容性</a></li><li class="sidebar-sub-header"><a href="/blog/others/typescript.html#_7-高级类型" class="sidebar-link">7.高级类型</a></li></ul></li><li><a href="/blog/others/npm.html" class="sidebar-link">npm 发包和更新</a></li><li><a href="/blog/others/test.html" class="sidebar-link">测试</a></li><li><a href="/blog/others/interview.html" class="sidebar-link">面试知识点梳理</a></li><li><a href="/blog/others/interview-en.html" class="sidebar-link">interview</a></li><li><a href="/blog/others/summary.html" class="sidebar-link">summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typesrcipt"><a href="#typesrcipt" class="header-anchor">#</a> TypeSrcipt</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-interface">1.interface</a><ul><li><a href="#_1-1-对象类型：描述普通对象">1.1 对象类型：描述普通对象</a></li><li><a href="#_1-2-函数类型：描述函数">1.2 函数类型：描述函数</a></li><li><a href="#_1-3-类类型">1.3 类类型</a></li><li><a href="#_1-4-继承接口">1.4 继承接口</a></li><li><a href="#_1-5-混合类型-todo">1.5 混合类型 TODO</a></li><li><a href="#_1-6-接口继承类-todo">1.6 接口继承类 TODO</a></li></ul></li><li><a href="#_2-类">2.类</a><ul><li><a href="#_2-1-继承">2.1 继承</a></li><li><a href="#_2-2-修饰符">2.2 修饰符</a></li><li><a href="#_2-3-参数属性">2.3 参数属性</a></li><li><a href="#_2-4-取值器">2.4 取值器</a></li><li><a href="#_2-5-静态属性">2.5 静态属性</a></li><li><a href="#_2-6-抽象类">2.6 抽象类</a></li><li><a href="#_2-7-类可以做接口使用-todo">2.7 类可以做接口使用 TODO</a></li></ul></li><li><a href="#_3-函数">3.函数</a></li><li><a href="#_4-泛型">4.泛型</a><ul><li><a href="#_4-1-泛型语法">4.1 泛型语法</a></li><li><a href="#_4-2-泛型接口">4.2 泛型接口</a></li><li><a href="#_4-3-泛型类">4.3 泛型类</a></li><li><a href="#_4-4-泛型约束">4.4 泛型约束</a></li></ul></li><li><a href="#_5-枚举">5.枚举</a><ul><li><a href="#_5-1-数字枚举">5.1 数字枚举</a></li><li><a href="#_5-2-字符串枚举">5.2 字符串枚举</a></li><li><a href="#_5-3-枚举的修饰符">5.3 枚举的修饰符</a></li></ul></li><li><a href="#_6-类型兼容性">6.类型兼容性</a></li><li><a href="#_7-高级类型">7.高级类型</a><ul><li><a href="#_7-1-交叉类型（intersection-types）-》">7.1 交叉类型（Intersection Types）=》 &amp;</a></li><li><a href="#_7-2-联合类型（union-types）-》">7.2 联合类型（Union Types）=》 |</a></li><li><a href="#_7-3-类型谓词-》-parametername-is-type-todo">7.3 类型谓词 =》 parameterName is Type TODO</a></li><li><a href="#_7-4-类型别名-》-type-typename">7.4 类型别名 =》 type typeName</a></li><li><a href="#_7-5-字符串字面量类型">7.5 字符串字面量类型</a></li><li><a href="#_7-6-可辨识联合-discriminated-unions">7.6 可辨识联合(Discriminated Unions)</a></li><li><a href="#_7-7-多态的-this-f-bounded">7.7 多态的 this(F-bounded)</a></li><li><a href="#_7-8-索引类型-index-types-todo">7.8 索引类型(Index types) TODO</a></li></ul></li></ul></div><p></p> <h2 id="_1-interface"><a href="#_1-interface" class="header-anchor">#</a> 1.interface</h2> <h3 id="_1-1-对象类型：描述普通对象"><a href="#_1-1-对象类型：描述普通对象" class="header-anchor">#</a> 1.1 对象类型：描述普通对象</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> y<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  z<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>propName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> foo<span class="token punctuation">:</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> <span class="token string">&quot;text&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>?</code> 可选属性</li> <li><code>readony</code> 与 <code>const</code> <ul><li>做为变量使用的话用 <code>const</code>，若做为属性则使用 <code>readonly</code></li> <li>只能在对象刚刚创建的时候修改其值</li></ul></li> <li>添加额外属性：<code>[propName: string]: any;</code></li></ul> <h3 id="_1-2-函数类型：描述函数"><a href="#_1-2-函数类型：描述函数" class="header-anchor">#</a> 1.2 函数类型：描述函数</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">FooFun</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>source<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> substr<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fooFunction<span class="token punctuation">:</span> <span class="token function-variable function">FooFun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> sub</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> src<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-3-类类型"><a href="#_1-3-类类型" class="header-anchor">#</a> 1.3 类类型</h3> <p>在接口中描述，在类中实现</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">FooInterface</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">doSomethings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">implements</span> <span class="token class-name">FooInterface</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> prop<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">doSomethings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;do somethings&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>props<span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">doSomethings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对 constructor(静态部分) 进行类型检查：TODO</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ClockConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span>hour<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> minute<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ClockInterface<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createClock</span><span class="token punctuation">(</span><span class="token parameter">ctor<span class="token punctuation">:</span> ClockConstructor<span class="token punctuation">,</span> hour<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> minute<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> ClockInterface <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span>hour<span class="token punctuation">,</span> minute<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DigitalClock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beep beep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">AnalogClock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;tick tock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> digital <span class="token operator">=</span> <span class="token function">createClock</span><span class="token punctuation">(</span>DigitalClock<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> analog <span class="token operator">=</span> <span class="token function">createClock</span><span class="token punctuation">(</span>AnalogClock<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-4-继承接口"><a href="#_1-4-继承接口" class="header-anchor">#</a> 1.4 继承接口</h3> <p>一个接口可以继承多个接口，创建出多个接口的合成接口</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">PenStroke</span> <span class="token punctuation">{</span>
    penWidth<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span><span class="token punctuation">,</span> PenStroke <span class="token punctuation">{</span>
    sideLength<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> square <span class="token operator">=</span> <span class="token operator">&lt;</span>Square<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>sideLength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>penWidth <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-5-混合类型-todo"><a href="#_1-5-混合类型-todo" class="header-anchor">#</a> 1.5 混合类型 TODO</h3> <p>一个对象可以同时做为函数和对象使用，并带有额外的属性,在使用JavaScript第三方库的时候，你可能需要像上面那样去完整地定义类型:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>start<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    interval<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Counter <span class="token punctuation">{</span>
    <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token operator">&lt;</span>Counter<span class="token operator">&gt;</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    counter<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    counter<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> counter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-6-接口继承类-todo"><a href="#_1-6-接口继承类-todo" class="header-anchor">#</a> 1.6 接口继承类 TODO</h3> <p>当接口继承了一个类类型时，它会继承类的成员但不包括其实现。就好像接口声明了所有类中存在的成员，但并没有提供具体实现一样。 接口同样会继承到类的private和protected成员。 这意味着当你创建了一个接口继承了一个拥有私有或受保护的成员的类时，这个接口类型只能被这个类或其子类所实现（implement）。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> state<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">SelectableControl</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
    <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token keyword">implements</span> <span class="token class-name">SelectableControl</span> <span class="token punctuation">{</span>
    <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">TextBox</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
    <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 错误：“Image”类型缺少“state”属性。</span>
<span class="token keyword">class</span> <span class="token class-name">Image</span> <span class="token keyword">implements</span> <span class="token class-name">SelectableControl</span> <span class="token punctuation">{</span>
    <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-类"><a href="#_2-类" class="header-anchor">#</a> 2.类</h2> <h3 id="_2-1-继承"><a href="#_2-1-继承" class="header-anchor">#</a> 2.1 继承</h3> <ul><li>父类有构造函数，子类必须在构造函数中调用 <code>super()</code></li> <li>子类在构造函数里访问 <code>this</code> 的属性之前，一定要调用 <code>super()</code></li> <li>子类实例可以赋值给一个父类的引用，类型检查通过。<code>let sup:Super; sup = new Sub()</code></li></ul> <h3 id="_2-2-修饰符"><a href="#_2-2-修饰符" class="header-anchor">#</a> 2.2 修饰符</h3> <ul><li><code>public</code>:默认值，实例可以自由访问的成员</li> <li><code>private</code>:不能在声明它的类的外部访问</li> <li><code>protected</code>:与 <code>private</code> 的行为很相似，不同点是，<code>protected</code> 成员在派生类中仍然可以访问。甚至可以用于构造函数，这意味着我们不能单独的实例化这个类，单可以在继承中调用 <code>super()</code> 来间接实例化。</li> <li><code>readonly</code>:只读属性，必须在声明时或构造函数里被初始化。</li></ul> <h3 id="_2-3-参数属性"><a href="#_2-3-参数属性" class="header-anchor">#</a> 2.3 参数属性</h3> <p>我们可以直接在构造函数中，使用修饰符 + 参数的形式，让我们方便的再一个地方定义并初始化一个成员。注意，这时 <code>public</code> 不能省略。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  prop1<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 省略 public</span>
  <span class="token keyword">private</span>   prop2<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">protected</span> prop3<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span>  prop4<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span>  prop5<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;prop5&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">p1<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> p2<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> p3<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> p4<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prop1 <span class="token operator">=</span> p1<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prop2 <span class="token operator">=</span> p2<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prop3 <span class="token operator">=</span> p3<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prop4 <span class="token operator">=</span> p4<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FooSimple</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> prop5<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;prop5&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    <span class="token keyword">public</span>    p1<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// public 不可以省略</span>
    <span class="token keyword">private</span>   p2<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    <span class="token keyword">protected</span> p3<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    <span class="token keyword">readonly</span>  p4<span class="token punctuation">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-4-取值器"><a href="#_2-4-取值器" class="header-anchor">#</a> 2.4 取值器</h3> <ul><li>通过 <code>get</code>/<code>set</code> 来截取对对象成员的访问、设置。 它能帮助你有效的控制对对象成员的访问、设置权限。</li> <li>只带有 <code>get</code> 不带有 <code>set</code> 的存取器自动被推断为 <code>readonly</code>。</li></ul> <h3 id="_2-5-静态属性"><a href="#_2-5-静态属性" class="header-anchor">#</a> 2.5 静态属性</h3> <ul><li>实例成员：仅当类被实例化的时候才会被初始化的成员。在类中访问时，需要使用 <code>this.prop</code> 来访问。</li> <li>静态成员：存在于类本身上面而不是类的实例上，用 <code>static</code> 关键字来定义一个静态成员。在使用静态成员时，前面加上类名 <code>Foo.staticPorp</code>。</li> <li>与实例成员一样，静态成员可以使用修饰符。</li></ul> <h3 id="_2-6-抽象类"><a href="#_2-6-抽象类" class="header-anchor">#</a> 2.6 抽象类</h3> <ul><li><code>abstract</code>关键字是用于定义抽象类和在抽象类内部定义抽象方法。</li> <li>抽象类做为其它派生类的基类使用。 允许创建一个对抽象类型的引用，不允许实例化抽象类。</li> <li>抽象类中的抽象方法不包含具体实现并且必须在派生类中实现。</li> <li>不同于接口，抽象类可以包含成员的实现细节。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Department name: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">abstract</span> <span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 必须在派生类中实现</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AccountingDepartment</span> <span class="token keyword">extends</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'Accounting and Auditing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在派生类的构造函数中必须调用 super()</span>
    <span class="token punctuation">}</span>

    <span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The Accounting Department meets each Monday at 10am.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">generateReports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Generating accounting reports...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> department<span class="token punctuation">:</span> Department<span class="token punctuation">;</span> <span class="token comment">// 允许创建一个对抽象类型的引用</span>
department <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误: 不能创建一个抽象类的实例</span>
department <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 允许对一个抽象子类进行实例化和赋值</span>
department<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
department<span class="token punctuation">.</span><span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
department<span class="token punctuation">.</span><span class="token function">generateReports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误: 方法在声明的抽象类中不存在</span>
</code></pre></div><h3 id="_2-7-类可以做接口使用-todo"><a href="#_2-7-类可以做接口使用-todo" class="header-anchor">#</a> 2.7 类可以做接口使用 TODO</h3> <h2 id="_3-函数"><a href="#_3-函数" class="header-anchor">#</a> 3.函数</h2> <ul><li>参数默认值</li> <li>可选参数</li> <li>剩余参数</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>prop1<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> prop2<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;prop2&quot;</span><span class="token punctuation">,</span> prop3<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prop1 <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> prop2 <span class="token operator">+</span> <span class="token punctuation">(</span>prop3 <span class="token operator">?</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> prop3 <span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> testArrow <span class="token operator">=</span> <span class="token punctuation">(</span>prop<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token parameter"><span class="token builtin">string</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prop <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-泛型"><a href="#_4-泛型" class="header-anchor">#</a> 4.泛型</h2> <h3 id="_4-1-泛型语法"><a href="#_4-1-泛型语法" class="header-anchor">#</a> 4.1 泛型语法</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> test<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>prop<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> testArrow <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>prop<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token parameter"><span class="token constant">T</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prop<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-2-泛型接口"><a href="#_4-2-泛型接口" class="header-anchor">#</a> 4.2 泛型接口</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> identity<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myIdentity<span class="token punctuation">:</span> GenericIdentityFn <span class="token operator">=</span> identity<span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-3-泛型类"><a href="#_4-3-泛型类" class="header-anchor">#</a> 4.3 泛型类</h3> <p>泛型类使用 <code>&lt;&gt;</code> 括起泛型类型，跟在类名后面.泛型类指的是实例部分的类型，所以类的静态属性不能使用这个泛型类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">GenericNumber</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  zeroValue<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  <span class="token function-variable function">add</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myGenericNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericNumber</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以通过 &lt;number&gt; 指定类型</span>
myGenericNumber<span class="token punctuation">.</span>zeroValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
myGenericNumber<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-4-泛型约束"><a href="#_4-4-泛型约束" class="header-anchor">#</a> 4.4 泛型约束</h3> <ul><li>使用泛型继承接口，来使用泛型中确定的元素</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">LengthInter</span> <span class="token punctuation">{</span>
  length<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> test<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">LengthInter</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>prop<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> prop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>在泛型里使用类类型，用于在创建工厂函数 TODO</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">BeeKeeper</span> <span class="token punctuation">{</span>
  hasMask<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ZooKeeper</span> <span class="token punctuation">{</span>
  nametag<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  numLegs<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bee</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  keeper<span class="token punctuation">:</span> BeeKeeper<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  keeper<span class="token punctuation">:</span> ZooKeeper<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> createInstance<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>c<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">createInstance</span><span class="token punctuation">(</span>Lion<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>nametag<span class="token punctuation">;</span>
<span class="token function">createInstance</span><span class="token punctuation">(</span>Bee<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>hasMask<span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-枚举"><a href="#_5-枚举" class="header-anchor">#</a> 5.枚举</h2> <h3 id="_5-1-数字枚举"><a href="#_5-1-数字枚举" class="header-anchor">#</a> 5.1 数字枚举</h3> <ul><li>数字枚举，在不指定初始其实位置时，默认从 0 开始，其余成员基于初始位置自增。</li> <li>某一个指定默认值（任意位置都可以指定），其后成员在此基础上自增，其前不变。</li> <li>如果指定的值重复，两者共存，但是以索引来确认值时，后者覆盖前者。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
  Green<span class="token punctuation">,</span>
  Red <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Yellow<span class="token punctuation">,</span>
  White
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* { '0': 'Red',
     '1': 'Yellow',
     '2': 'White',
     Green: 0,
     Red: 0,
     Yellow: 1,
     White: 2 }
*/</span>
</code></pre></div><h3 id="_5-2-字符串枚举"><a href="#_5-2-字符串枚举" class="header-anchor">#</a> 5.2 字符串枚举</h3> <ul><li>每一个成员必须必须进行初始化</li> <li>枚举可以混合字符串和数字成员，称为异构枚举(Heterogeneous enums)，这样容易引起问题(没有完全初始化时)，不建议使用</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
  Green <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span>
  Red <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
  Yellow <span class="token operator">=</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span>
  White <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// { Green: 'green', Red: 'red', Yellow: 'yellow', White: 'white' }</span>
</code></pre></div><h3 id="_5-3-枚举的修饰符"><a href="#_5-3-枚举的修饰符" class="header-anchor">#</a> 5.3 枚举的修饰符</h3> <ul><li><code>const</code> 常量枚举：常量枚举不允许包含计算成员</li> <li><code>declare</code> 外部枚举：用来描述已经存在的枚举类型的形状，外部枚举和非外部枚举之间有一个重要的区别，在正常的枚举里，没有初始化方法的成员被当成常数成员。 对于非常数的外部枚举而言，没有初始化方法时被当做需要经过计算的。 TODO</li></ul> <h2 id="_6-类型兼容性"><a href="#_6-类型兼容性" class="header-anchor">#</a> 6.类型兼容性</h2> <ul><li>TypeScript 里的类型兼容性是基于结构子类型的。也就是说只要元素类型一致，即使不是继承、实现关系，也可以认定为类型一致。</li> <li>TypeScript 的类型系统允许某些在编译阶段无法确认其安全性的操作。当一个类型系统具此属性时，被当做是“不可靠”的。TypeScript 允许这种不可靠行为的发生是经过仔细考虑的。 TODO</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Named</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p<span class="token punctuation">:</span> Named<span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK, because of structural typing</span>
</code></pre></div><p>具体规则：</p> <ul><li>TypeScript 结构化类型系统的基本规则是，如果 x 要兼容 y，那么  y至少具有与 x 相同的属性。</li> <li>y 有额外的属性，不会引发错误，比较过程是递归进行的，检查每个成员及子成员。</li> <li>比较两个函数，首先看它们的参数列表，x 的每个参数必须能在 y 里找到对应类型的参数（参数名称不需要一致，只保证类型一致），y 可以有额外参数。</li> <li>类的比较，比较两个类类型的对象时，只有实例的成员会被比较。 静态成员和构造函数不在比较的范围内。</li> <li>类的私有成员和受保护成员会影响兼容性。 当检查类实例的兼容时，如果目标类型包含一个私有成员，那么源类型必须包含来自同一个类的这个私有成员。即使类型一致，来源不是同一类，也不兼容。</li></ul> <h2 id="_7-高级类型"><a href="#_7-高级类型" class="header-anchor">#</a> 7.高级类型</h2> <h3 id="_7-1-交叉类型（intersection-types）-》"><a href="#_7-1-交叉类型（intersection-types）-》" class="header-anchor">#</a> 7.1 交叉类型（Intersection Types）=》 &amp;</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> extend<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> second<span class="token punctuation">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>first<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>second<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Loggable</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ConsoleLogger</span> <span class="token keyword">implements</span> <span class="token class-name">Loggable</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;do log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> jim <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Jim&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jim<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'Jim', log: [Function] }</span>
jim<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// do log</span>
</code></pre></div><h3 id="_7-2-联合类型（union-types）-》"><a href="#_7-2-联合类型（union-types）-》" class="header-anchor">#</a> 7.2 联合类型（Union Types）=》 |</h3> <p>联合类型表示一个值可以是几种类型之一, 我们用竖线 <code>|</code> 分隔每个类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-类型谓词-》-parametername-is-type-todo"><a href="#_7-3-类型谓词-》-parametername-is-type-todo" class="header-anchor">#</a> 7.3 类型谓词 =》 parameterName is Type TODO</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> x <span class="token keyword">is</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-4-类型别名-》-type-typename"><a href="#_7-4-类型别名-》-type-typename" class="header-anchor">#</a> 7.4 类型别名 =》 type typeName</h3> <ul><li>起别名不会新建一个类型,它创建了一个新名字来引用那个类型。</li> <li>类型别名不能出现在声明右侧的任何地方。</li> <li><code>type NewStr = string;</code></li></ul> <h3 id="_7-5-字符串字面量类型"><a href="#_7-5-字符串字面量类型" class="header-anchor">#</a> 7.5 字符串字面量类型</h3> <p>字符串字面量类型允许你指定字符串必须的固定值。结合：联合类型、类型保护、类型别名，就可以实现类似枚举类型的字符串。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> Input <span class="token operator">=</span> <span class="token string">&quot;input1&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;input2&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;input3&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">checkInput</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">:</span> Input</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">checkInput</span><span class="token punctuation">(</span><span class="token string">&quot;input1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">checkInput</span><span class="token punctuation">(</span><span class="token string">&quot;input2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">checkInput</span><span class="token punctuation">(</span><span class="token string">&quot;input0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre></div><h3 id="_7-6-可辨识联合-discriminated-unions"><a href="#_7-6-可辨识联合-discriminated-unions" class="header-anchor">#</a> 7.6 可辨识联合(Discriminated Unions)</h3> <p>你可以合并单例类型，联合类型，类型保护和类型别名来创建一个叫做可辨识联合的高级模式，它也称做标签联合或代数数据类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  kind<span class="token punctuation">:</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">;</span>
  size<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
  kind<span class="token punctuation">:</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">;</span>
  width<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  height<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token punctuation">:</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">;</span>
  radius<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Shape <span class="token operator">=</span> Square <span class="token operator">|</span> Rectangle <span class="token operator">|</span> Circle<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这就是所谓的可辨识联合，其中 <code>kind</code> 属性称做可辨识的特征或标签，其它的属性则特定于各个接口，然后通过类型别名来联合。</p> <p>这里引出一个问题：<strong>完整性检查</strong>，即有没有完全覆盖联合。继续这个例子，我们新增一个 <code>interface</code>，希望能够通过错误来提示我们更新 <code>area</code> 方法，现在有两种方式：</p> <ul><li>启用 <code>--strictNullChecks</code> 并且指定一个返回值类型。<code>switch</code> 没有包涵所有情况时，TypeScript 认为这个函数有时候会返回 <code>undefined</code>，即返回值类型为 <code>number | undefined</code>，这样就与 <code>number</code> 不一致会报错。这种方式缺点：错误提示不明确；历史代码不友好。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">{</span> <span class="token comment">// error: Function lacks ending return statement and return type does not include 'undefined'</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>使用 <code>never</code> 类型，编译器用它来进行完整性检查。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">assertNever</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">:</span> <span class="token builtin">never</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Unexpected object: &quot;</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">:</span> Shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token function">assertNever</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: Argument of type 'Triangle' is not assignable to parameter of type 'never'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-7-多态的-this-f-bounded"><a href="#_7-7-多态的-this-f-bounded" class="header-anchor">#</a> 7.7 多态的 <code>this</code>(F-bounded)</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">BasicCalculator</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">protected</span> value<span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">add</span><span class="token punctuation">(</span>operand<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> operand<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">multiply</span><span class="token punctuation">(</span>operand<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">*=</span> operand<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ScientificCalculator</span> <span class="token keyword">extends</span> <span class="token class-name">BasicCalculator</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">value <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 注意 protected 类型元素子类的使用</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScientificCalculator</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-8-索引类型-index-types-todo"><a href="#_7-8-索引类型-index-types-todo" class="header-anchor">#</a> 7.8 索引类型(Index types) TODO</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/9/2019, 5:09:46 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/others/axios.html" class="prev">axios 常用方式总结</a></span> <span class="next"><a href="/blog/others/npm.html">npm 发包和更新</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.b560a9ee.js" defer></script><script src="/blog/assets/js/2.465c49ea.js" defer></script><script src="/blog/assets/js/77.794b3963.js" defer></script>
  </body>
</html>
